# Домашнее задание #1 (декабрь 2022)
> Широкое толкование задачи запустить виртуальную машину с Linux и установить Midnight Commander

**«Тяжело в учении – легко в бою»**

## Список ПО

### OS:  
   Host: Pop-Os 22.04 LTS  
   VM's: 'server' - Alpine 3.17 репак с апдейтами и Python, 'client' - Ubuntu 18.04    

### Main tools:  
    Vagrant + Ansible, Bash (Nginx installation script), Nginx, curl

## Сверхзадача

Автоматизация реплицируемого разворачивания виртуальной рабочей среды.

_Чтобы уложиться в срок сдачи некоротые моменты проекта еще ждут автоматизации._

## Ход выполнения

На хосте разработчика [Pop!_OS](https://pop.system76.com/) установлены: [VirtualBox](https://www.virtualbox.org/) + [Vagrant](https://www.vagrantup.com/) + [Ansible](https://www.ansible.com/)  

```Vagrantfile``` - поднимает две виртуальные машины (ВМ): 'server' ([Alpine 3.17](https://app.vagrantup.com/generic/boxes/alpine317)) и 'client' ([Ubuntu 18.04 LTS](https://app.vagrantup.com/ubuntu/boxes/bionic64)). Предварительно образ Alpine 3.17 переупаковывается с обновлениями и Python 3 для работы Ansible. После поднятия ВМ Vagrant запускает Ansible плейбук, который применяется к обеим системам. Плейбук показывает ответ систем, создает группу 'developers' и импортирует отдельные плейбуки для каждой ВМ.

Стоит отметить, что на ВМ 'server' проброшен порт на хост так, что зайдя на :8181 хоста придет ответ с :80 порта ВМ.

```server.yml``` - создает пользователя 'geek-ops' и добавляет его в группу 'developers' и генерит для него ssh ключи.

```client.yml``` - создает пользователей 'geek-dev' и 'geek-ops' и добавляет их в группу 'developers'. Пользователя 'geek-ops' добавляет в группу sudo пользователей. *Цель - научить через Ansible ВМ 'clent' скачивать публичный ключ пользователя 'geek-ops' с 'server' и авторизировать ключ для доступа по ssh пользователя 'geek-ops'*

```developers/nginx.sh``` - bash скрипт для установки Nginx на Alpine и замены index.html на тестовый. *На данный момент приходится запускать руками, через Ansible пока работает через раз.*

```pinger.sh``` - bash скрипт пингующий ВМ с хоста и внутри приватной сети ВМ.


## История релизов

* 0.0.1
    * Работа продолжается